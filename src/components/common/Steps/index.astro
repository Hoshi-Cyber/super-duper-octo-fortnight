---
/** Steps â€” mobile-first, brand-consistent, token-driven
 *  Props:
 *    title?: string
 *    eyebrow?: string
 *    steps: Array<{ title: string; description: string; icon?: string; ctaHref?: string; ctaLabel?: string }>
 *    align?: 'start' | 'center'
 *    columns?: 1 | 2 | 3 | 4
 *    class?: string
 */
import "./Steps.css";

export interface Step {
  title: string;
  description: string;
  icon?: string;
  ctaHref?: string;
  ctaLabel?: string;
}
export interface Props {
  title?: string;
  eyebrow?: string;
  steps: Step[];
  align?: "start" | "center";
  columns?: 1 | 2 | 3 | 4;
  class?: string;
}

const {
  title = "Our Process",
  eyebrow,
  steps = [],
  align = "start",
  columns = 4,
  class: className = "",
} = Astro.props as Props;

const alignClass = align === "center" ? "text-center items-center" : "text-start items-start";
const gridColsLg =
  columns === 1
    ? "lg:grid-cols-1"
    : columns === 2
    ? "lg:grid-cols-2"
    : columns === 3
    ? "lg:grid-cols-3"
    : "lg:grid-cols-4";
---

<section class={`steps container py-10 xs:py-12 md:py-16 lg:py-20 ${className}`} data-section="steps">
  <header class={`steps__head ${alignClass} mb-6 md:mb-8`}>
    {eyebrow && <p class="steps__eyebrow text-xs uppercase tracking-wide text-muted">{eyebrow}</p>}
    {title && <h2 class="steps__title" id="steps-title">{title}</h2>}
  </header>

  <!-- Ordered list improves semantics for step flows -->
  <ol class={`steps__list grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 ${gridColsLg} gap-6`} aria-labelledby="steps-title">
    {steps.map((step, index) => (
      <li class="steps__item" value={index + 1}>
        <span class="steps__badge" aria-label={`Step ${index + 1}`}>{index + 1}</span>

        <div class="steps__content">
          <h3 class="steps__itemTitle">{step.title}</h3>
          <p class="steps__itemDesc text-muted">{step.description}</p>

          {step.ctaHref && step.ctaLabel && (
            <a href={step.ctaHref} class="btn btn-primary mt-4" data-cta={`steps-${index + 1}-cta`}>
              {step.ctaLabel}
            </a>
          )}
        </div>
      </li>
    ))}
  </ol>
</section>
