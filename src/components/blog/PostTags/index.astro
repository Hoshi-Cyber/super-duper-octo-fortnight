---
type Variant = "header" | "footer";

interface PostTagsProps {
  tags?: string[];
  variant?: Variant; // default: "header"
}

const { tags = [], variant = "header" } = Astro.props as PostTagsProps;

// Colocated CSS
const sheet = new URL("./PostTags.css", import.meta.url).toString();

// Robust, local slugify for tag URLs
const slugify = (s: string) =>
  s
    .toLowerCase()
    .trim()
    .replace(/[\s\W-]+/g, "-")
    .replace(/^-+|-+$/g, "");
---

{tags.length > 0 && (
  <>
    <link rel="stylesheet" href={sheet} />
    <ul
      class={`post__tags${variant === "footer" ? " post__tags--footer" : ""}`}
      aria-label="Tags"
    >
      {tags.slice(0, 12).map((t) => (
        <li>
          <a
            class="post__tag"
            href={`/blog/tag/${slugify(t)}/`}
            rel="tag"
            itemprop="keywords"
          >
            {t}
          </a>
        </li>
      ))}
    </ul>
  </>
)}
